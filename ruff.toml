# Ruff configuration for flatten-repo
# Documentation: https://docs.astral.sh/ruff/

line-length = 110
target-version = "py313"
preview = true

exclude = [
  "*.egg-info",
  ".bzr",
  ".direnv",
  ".eggs",
  ".git",
  ".git-rewrite",
  ".hg",
  ".mypy_cache",
  ".nox",
  ".pants.d",
  ".pytype",
  ".ruff_cache",
  ".svn",
  ".tox",
  ".venv",
  "__pycache__",
  "__pypackages__",
  "_build",
  "buck-out",
  "build",
  "dist",
  "node_modules",
  "venv",
]

[lint]
  select = [
    "A",     # Flake8-builtins – misuse of Python built-in names
    "AIR",   # Airflow – Airflow-specific linting rules
    "ANN",   # Flake8-annotations – enforces type annotation style
    "ARG",   # Flake8-unused-arguments – flags unused function arguments
    "ASYNC", # Flake8-async – checks async/await usage
    "B",     # Flake8-bugbear – common bug patterns
    "BLE",   # Flake8-blind-except – flags bare excepts
    "C4",    # Flake8-comprehensions – best practices in comprehensions
    "C90",   # McCabe – complexity metric for functions
    "COM",   # Flake8-commas – trailing/comma issues
    "D",     # Pydocstyle – docstring formatting
    "DJ",    # Flake8-django – Django-specific conventions
    "DOC",   # Pydoclint – docstring linting and consistency
    "DTZ",   # Flake8-datetimez – requires timezone-aware datetime objects
    "E",     # Pycodestyle errors (style issues)
    "EM",    # Flake8-errmsg – error message style
    "ERA",   # Eradicate – detects commented-out code (potentially dangerous)
    "EXE",   # Flake8-executable – executable file checks
    "F",     # Pyflakes – logical errors and undefined names
    "FA",    # Flake8-future-annotations – future import for annotations
    "FAST",  # FastAPI – FastAPI-specific linting rules
    "FBT",   # Flake8-boolean-trap – potential pitfalls with booleans
    "FIX",   # Flake8-fixme – flags FIXME comments
    "FLY",   # Flynt – f-string conversion suggestions
    "FURB",  # Refurb – rules for code refurbishment
    "G",     # Flake8-logging-format – logging format string issues
    "I",     # isort – import ordering checks
    "ICN",   # Flake8-import-conventions – enforces conventional import aliases
    "INP",   # Flake8-no-pep420 – warns against non-PEP420 namespace usage
    "INT",   # Flake8-gettext – checks for proper internationalization usage
    "ISC",   # Flake8-implicit-str-concat – warns on implicit string concatenation
    "LOG",   # Flake8-logging – proper logging usage
    "N",     # PEP8 Naming – naming conventions
    "NPY",   # NumPy-specific rules – ensures NumPy coding standards
    "PD",    # Pandas-vet – checks pandas-specific code practices
    "PERF",  # Perflint – performance-related checks
    "PGH",   # Pygrep-hooks – custom grep hooks for linting
    "PIE",   # Flake8-pie – Python improvement suggestions
    "PL",    # Pylint – integration with Pylint conventions
    "PT",    # Flake8-pytest-style – pytest best practices
    "PTH",   # Flake8-use-pathlib – encourages pathlib over os.path
    "PYI",   # Flake8-pyi – checks for type stub (.pyi) consistency
    "Q",     # Flake8-quotes – enforces quote style consistency
    "RET",   # Flake8-return – return statement issues
    "RSE",   # Flake8-raise – proper raise statement usage
    "RUF",   # Ruff-specific rules – additional Ruff checks
    "S",     # Flake8-bandit – security issues
    "SIM",   # Flake8-simplify – code simplification hints
    "SLF",   # Flake8-self – flags instance methods that don't use self
    "SLOT",  # Flake8-slots – suggests use of __slots__ where appropriate
    "T10",   # Flake8-debugger – debugger statements (e.g. pdb)
    "TC",    # Flake8-type-checking – proper import of typing in type checks
    "TD",    # Flake8-todos – flags TODO comments
    "TID",   # Flake8-tidy-imports – enforces specific import styles (e.g., no relative imports)
    "TRY",   # Tryceratops – try/except usage suggestions
    "UP",    # Pyupgrade – upgrades syntax to newer Python versions
    "W",     # Pycodestyle warnings (style issues)
    "YTT",   # Flake8-2020 – checks for Python 2020 best practices
    # "T20",  # Flake8-print – disallows print statements
  ]

  ignore = [
    "A002",   # Flake8-builtins – Argument name shadows a Python builtin (autorisé pour lisibilité/compatibilité interne)
    "BLE001", # Flake8-blind-except – Blind except (autorisé pour capturer toutes les exceptions lors de l'exécution de code tiers)
    "D100",   # Pydocstyle - missing docstring in public module
    "D203",   # Pydocstyle - one blank line required before class docstring
    "E501",   # Pycodestyle - line too long
    "EM101",  # Flake8-errmsg - error message should not be a string literal.
    "EM102",  # Flake8-errmsg - error message should not be a f-string.
    "G201",   # flake8-logging-format - Logging exception instead of error
    "S311",   # Flake8-bandit - Standard pseudo-random generators are not suitable for security/cryptographic purposes
    # "PGH003",   # type ignore should use specific rule code when ignoring type issue
    # "TRY003",   # Avoid specifying long messages outside the exception class
  ]

  [lint.per-file-ignores]
    "test_*.py" = ["ANN001", "ANN201", "D103", "S101", "SLF001"]
    "**/tests/**/*.py" = ["ANN001", "ANN201", "D103", "S101"]
    "scripts/*.py" = ["T201", "T203"]
    "launch_*.py" = ["T201", "T203"]
    "**/__init__.py" = ["D104"]


  [lint.flake8-quotes]
    docstring-quotes = "double"
    inline-quotes = "double"

  [lint.flake8-annotations]
    suppress-dummy-args = true
    suppress-none-returning = true

  [lint.pydocstyle]
    convention = "google"
